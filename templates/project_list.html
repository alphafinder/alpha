{% extends 'base.html' %}

{% block title %}
    Активные проекты
{% endblock %}

{% block styles %}
.card-deck {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    grid-gap: .9rem;
}

ellips {
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap
}

{% endblock %}

{% block content %}


<div class="main-content ml-5 mr-5">
<div class="card-columns">
    {% for pr in object_list %}
      <div class="card" style="{{ pr.card_color }}" >
        <div class="card-body" style="max-height: 40rem;">
            <div class="row">
                <div class="col-12 col-md-6 col-sm-12">
                <h4 class="card-title" style="width: 100%;">
                  <span>{{pr.name.title}}</span>
                </h4>
                </div>
                <div class="col-12 col-md-6">
                    <div class="btn-toolbar float-right" role="group">
                        {% if pr.is_public == 1 %}
                         <div class="btn-group mr-2 top--2 right--4" role="group" aria-label="First group">
                          <button class='btn btn-outline-light p-1' style="font-size: 20px; margin-right: 5px;">
                             <i class="fa fa-unlock" style=""></i>
                            </button>
                         </div>
                        {% else %}
                             <div class="btn-group mr-2 top--2 right--4" role="group" aria-label="First group">
                          <button class='btn btn-light p-1' style="font-size: 20px; margin-right: 5px;">
                             <i class="fa fa-lock" style=""></i>
                            </button>
                         </div>
                        {% endif %}
                        <div class="btn-group mr-2 top--2 right--3" role="group" aria-label="Second group">
                            {% if user in pr.members_with_edit_rights%}
                            <a href="{% url 'project_view' pr.id %}">
                              <button class='btn btn-danger float-right' style="" href="{% url 'project_view' pr.id %}">
                                   <i class="fa fa-edit" style=""></i>
                                  </button>
                            </a>
                            {% else %}
                                <button class='btn btn-primary float-right' style="" >
                           <i class="fa fa-book-open" style=""></i>
                          </button>
                            {% endif %}
                        </div>
                    </div>
            </div>
            </div>

{#        <p class="card-text" style="max-height: 350px; overflow: hidden;">{{ pr.description.title }}</p>#}
            {% if pr.author.username == user.username %}
                <footer class="blockquote-footer">Создатель: <cite title="Source Title">Вы</cite></footer>
            {% else %}
                <footer class="blockquote-footer">Создатель: <cite title="Source Title">{{ pr.author.username }}</cite></footer>
            {% endif %}
            <footer class="blockquote-footer">Создан: <b>{{ pr.created_at }}</b></footer>

        </div>
        <div class="card-footer bg-secondary">
             <div style="display:flex">
                {% for tag in pr.tags.all %}
                    <a class="mr-1 badge badge-info">#{{ tag }}</a>
                {% endfor %}
            </div>
        </div>
        <div class="card-footer bg-secondary text-muted">
            <div class="row">
            <div class="col-12 col-md-6 col-sm-12">
                {% for c in pr.collaborators.all %}
                    <span class="avatar rounded-circle" style="width: 30px; height: 30px;">
                       <a href="{{ c.member.profile.link }}"><img alt="{{ c.username }}" src="{{ c.member.profile.avatar_url }}"></a>
                    </span>
                {% endfor %}
            </div>
            <div class="col-12 col-md-6 col-sm-12">
                <h5  class="float-right">
                {{ pr.get_status }}
                </h5 >
                <br>
            </div>
            </div>
        </div>
      </div>
    {% endfor %}

</div>
</div>

</div>
{% endblock %}
